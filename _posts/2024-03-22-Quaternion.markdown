---
title:  "Quarternion"
excerpt: "사원수"
last_modified_at: 2024-03-22
categories:
  - OpenGL
tags:
  - OpenGL
---
# 사원수
해밀턴에 의해 고안된 수 체계로 허수에서 발전한 형태로, 단위사원수 $1, i, j, k$는 $i^2=j^2=k^2=ijk=-1$을 만족하며 세 수는 서로 다른 수다.

사원수를 표기하는 방식은 이하의 2가지가 있다.

* 단위사원수 표기를 전부 이용해, $w+xi+yj+zk$ 식으로 표기한다.
* 스칼라 형식의 $w$와 벡터 형식의 $v$를 합쳐서 $[w, v]$ 형태로 표기한다.
## 사원수의 기초 연산
* 덧셈: $q+q'=[w+w', v+v']$
* 곱셈: $qq'=[ww'-v\cdot v, v\times v'+wv'+w'v]$
* 켤레: $q^*=[w, -v]$
* Norm: $N(q)=w^2+x^2+y^2+z^2$
* 역수: $q^{-1}=q^*/N(q)$

## 단위 사원수
사원수 $q$의 Norm 값이 1일 경우, 단위 사원수라고 정의한다. 단위 사원수의 역수는 켤레수와 동일하다.

($\because q^{-1}=q^*/N(q)=q^*/1=q^*$)
## 사원수의 항등원
* 덧셈: $[0, (0, 0, 0)]$
* 곱셈: $[1, (0, 0, 0)]$

# 사원수를 이용한 회전
## 특정 각도만큼 돌릴 때
축 $v$에 대해 $t$도만큼 돌리고 싶다면 $q=[\cos(t/2), \sin(t/2), v]$로 나타낼수 있다.

예를 들어, x축을 기준으로 한다면 $q=[\cos(t/2), \sin(t/2), (1, 0, 0)]$
## 일반화
임의의 벡터나 점 $v$를 $q$만큼 회전할 경우, 회전된 점 $v'$는 $qrq^{-1}$이 된다. (단 $r=[0, v]$)

이 때 회전에 사용한 사원수 $q=w+xi+yj+zk$를 회전 행렬로 바꿀 경우, $R_m=\begin{bmatrix}
1-2y^2-2z^2 && 2xy-2wz && 2xz+2wy \\
2xy+2wz && 1-2x^2-2z^2 && 2yz-2wx \\
2xz-2wy && 2yz+2wx && 1-2x^2-2y^2 \\
\end{bmatrix}$가 된다.

이런 식으로 길고 복잡한 행렬을 사원수를 이용하면 짧고 간단하게 나타낼 수 있게 된다.

